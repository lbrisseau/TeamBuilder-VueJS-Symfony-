<!DOCTYPE html>
<html>

<head>
	<title>Mini projet Equipe de personnes</title>
	<meta charset="utf-8">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
		integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w=="
		crossorigin="anonymous" />



	<style>
		.divListUser,
		.divUser {
			background-color: #ccc;
			padding: 20px;
			border-radius: 20px
		}

		.divListUser {
			margin-top: 20px;
			border-radius: 20px
		}

		.divTeam {
			background-color: #ccc;
			padding: 20px;
			border-radius: 20px
		}

		#tabListUser td {
			height: 45px;
			width: 120px;
		}
	</style>
</head>

<body>
	<div class="container mt-3" id="teambuilder">

		<div class="row">
			<div class="col-md-8">
				<div class="divTeam">
					<div class="row">
						<div class="col-4">

							<input class="form-control" id="team" placeholder="Nom de l'Equipe">
						</div>
						<div class="col-8">
							<button class="btn btn-success" id="btnAddTeam">
								<i class="fa fa-plus"></i>
							</button>
						</div>
					</div>


				</div>
				<div id="demo"></div>
			</div>
			<div class="col-md-4">
				<div class="divUser">
					<div class="form-group">
						<input class="form-control" placeholder="PrÃ©nom" type="text" id="prenom" />
					</div>
					<div class="form-group">
						<input class="form-control" placeholder="Nom" type="text" id="nom" />
					</div>
					<div class="form-group">
						<select class="form-control" id="MyUserTeam">
							<option value="0">Pas d'Equipe</option>
						</select>
					</div>
					<div class="form-group text-center mb-0">
						<button class="btn btn-success btn-lg " id="btnAddUser">
							<i class="fa fa-plus"></i>
						</button>
					</div>

				</div>



				<div class="divListUser">
					<table id="tabListUser">

					</table>
				</div>

			</div> <!-- col4 -->
		</div><!-- row -->

	</div><!-- container -->
	<script src="https://cdn.jsdelivr.net/npm/vue"></script>

	<script>
		const app = new Vue(
			{
				el: '#teambuilder',
				data:
				{
					tabPersonnes: [],
					tabEquipes: [],
			
				},
				methods:
				{
					isBought(o) {
						if (o.status == true) {
							return true;
						}
					},

					isNotBought(o) {
						if (o.status == false) {
							return true;
						}
					},

					buy(o) {
						o.status = true;
						// on ajoute ds le tableau
						let url = 'http://localhost/TP%20VueJS/TP3%20courses/tp/back/public/items/' + o.id;;
						let param = {};
						param.method = 'PUT';
						param.header = { 'content-Type': 'application/json' };
						param.body = JSON.stringify(o);
						fetch(url, param)
							.then(response => response.json())
							.then(
								info => {
									console.log(info);
								});

					},
					ajouterEquipe() {
						let o = {}; // creation d objet
						o.title = this.title;
						o.status = false;
						this.title = '';
						// on ajoute ds le tableau
						let url = 'http://localhost/TP%20VueJS/TP3%20courses/tp/back/public/items/';
						let param = {};
						param.method = 'POST';
						param.header = { 'content-Type': 'application/json' };
						param.body = JSON.stringify(o);
						fetch(url, param)
							.then(response => response.json())
							.then(
								info => {
									console.log(info);
									o.id = info.id;
									this.tableau.push(o);
								});
					},
					supprimerEquipe(i) {

						let id = this.tableau[i].id;
						this.tableau.splice(i, 1);
						console.log(id);
						let url = 'http://localhost/TP%20VueJS/TP3%20courses/tp/back/public/items/' + id;

						let param = {};
						param.method = 'DELETE';
						param.header = { 'content-Type': 'application/json' };

						fetch(url, param)
							.then(response => response.json())
							.then(
								info => {
									console.log(info);
								});
					}
					ajouterPersonne() {
						let o = {}; // creation d objet
						o.title = this.title;
						o.status = false;
						this.title = '';
						// on ajoute ds le tableau
						let url = 'http://localhost/TP%20VueJS/TP3%20courses/tp/back/public/items/';
						let param = {};
						param.method = 'POST';
						param.header = { 'content-Type': 'application/json' };
						param.body = JSON.stringify(o);
						fetch(url, param)
							.then(response => response.json())
							.then(
								info => {
									console.log(info);
									o.id = info.id;
									this.tableau.push(o);
								});
					},
					supprimerPersonne(i) {

						let id = this.tableau[i].id;
						this.tableau.splice(i, 1);
						console.log(id);
						let url = 'http://localhost/TP%20VueJS/TP3%20courses/tp/back/public/items/' + id;

						let param = {};
						param.method = 'DELETE';
						param.header = { 'content-Type': 'application/json' };

						fetch(url, param)
							.then(response => response.json())
							.then(
								info => {
									console.log(info);
								});
					}
				},
				mounted() {
					let url = 'http://localhost/TP%20VueJS/TP3%20courses/tp/back/public/items/';
					fetch(url)
						.then(response => response.json())
						.then(
							tab => {
								this.tableau = tab;
							});
				}
			});
	</script>



</body>

</html>